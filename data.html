<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Data Management - Super Admin</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.5/dist/sweetalert2.min.css">
    <style>
        :root {
            --primary-light: #6a11cb; /* Lighter purple */
            --primary-dark: #2575fc;  /* Darker blue */
            --gradient-bg: linear-gradient(135deg, var(--primary-light) 0%, var(--primary-dark) 100%);
            --text-light: #e0e0e0;
            --text-dark: #333;
            --card-bg: rgba(255, 255, 255, 0.08); /* Lighter glass */
            --card-border: rgba(255, 255, 255, 0.15);
            --input-bg: rgba(255, 255, 255, 0.1);
            --button-bg: #4CAF50; /* Green for save/edit */
            --button-delete: #F44336; /* Red for delete */
            --button-cancel: #757575; /* Grey for cancel */
            --shadow-light: 0 8px 32px 0 rgba(0, 0, 0, 0.2);
            --shadow-dark: 0 10px 40px rgba(0, 0, 0, 0.5);
            --transition-speed: 0.3s ease;
        }

        /* --- Base Styles --- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Montserrat', sans-serif;
        }

        body {
            background: var(--gradient-bg);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--text-light);
            overflow-x: hidden; /* Prevent horizontal scroll on body */
            padding: 20px; /* Add some padding around the content */
        }

        .container {
            width: 100%;
            max-width: 900px;
            margin: 0 auto; /* Center the container */
            padding: 0; /* Remove internal padding, handled by data-table-container */
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 0 15px; /* Add horizontal padding for header */
        }

        .header h1 {
            font-size: 2.8rem;
            font-weight: 700;
            color: #fff;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1rem;
            color: var(--text-light);
            opacity: 0.9;
        }

        /* --- Table & Card Styles --- */
        .data-table-container {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 18px;
            padding: 25px;
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            box-shadow: var(--shadow-light);
            overflow-x: auto; /* Allows horizontal scrolling for table on smaller screens if needed */
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            color: var(--text-light);
            min-width: 600px; /* Default minimum width for desktop/tablet */
        }

        .data-table th,
        .data-table td {
            padding: 15px 10px;
            text-align: left;
            white-space: nowrap; /* Prevent text wrapping by default */
            vertical-align: middle;
        }

        .data-table thead {
            border-bottom: 2px solid var(--card-border);
        }

        .data-table th {
            font-weight: 600;
            font-size: 1rem;
            color: #fff;
            opacity: 0.9;
        }

        .data-table tbody tr {
            border-bottom: 1px solid var(--card-border);
            transition: background-color var(--transition-speed);
        }

        .data-table tbody tr:last-child {
            border-bottom: none;
        }

        .data-table tbody tr:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }

        /* Input styles */
        .data-table input[type="text"],
        .data-table input[type="password"] {
            background: var(--input-bg);
            border: 1px solid var(--card-border);
            border-radius: 8px;
            padding: 8px 12px;
            color: var(--text-light);
            font-size: 0.9rem;
            width: 100%;
            box-sizing: border-box;
            outline: none;
            transition: border-color var(--transition-speed), box-shadow var(--transition-speed);
        }

        .data-table input[type="text"]:focus,
        .data-table input[type="password"]:focus {
            border-color: var(--primary-light);
            box-shadow: 0 0 0 3px rgba(106, 17, 203, 0.3);
        }

        /* --- Button Styles --- */
        .action-buttons button,
        .action-buttons a {
            border: none;
            padding: 9px 14px;
            border-radius: 8px;
            cursor: pointer;
            margin-right: 8px;
            font-size: 0.9rem;
            font-weight: 600;
            transition: all var(--transition-speed);
            color: #fff;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            white-space: nowrap; /* Prevent button text from wrapping */
        }
        
        .edit-btn { background: #3498db; }
        .edit-btn:hover { background: #2980b9; transform: translateY(-2px); box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3); }

        .save-btn { background: #27ae60; }
        .save-btn:hover { background: #229954; transform: translateY(-2px); box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3); }

        .cancel-btn { background: #e67e22; }
        .cancel-btn:hover { background: #d35400; transform: translateY(-2px); box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3); }

        .delete-btn { background: #e74c3c; }
        .delete-btn:hover { background: #c0392b; transform: translateY(-2px); box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3); }


        /* --- Password Modal Styles --- */
        .password-modal {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0,0,0,0.85); /* Slightly darker overlay */
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 5000;
            opacity: 0;
            visibility: hidden;
            transition: opacity var(--transition-speed), visibility var(--transition-speed);
        }
        .password-modal.show {
            opacity: 1;
            visibility: visible;
        }

        .password-box {
            background: var(--card-bg);
            padding: 40px;
            border-radius: 20px;
            border: 1px solid var(--card-border);
            text-align: center;
            box-shadow: var(--shadow-dark);
            max-width: 450px;
            width: 90%;
            transform: translateY(-20px);
            opacity: 0;
            transition: transform var(--transition-speed) ease-out, opacity var(--transition-speed) ease-out;
        }
        .password-modal.show .password-box {
            transform: translateY(0);
            opacity: 1;
        }
        .password-box h2 {
            margin-bottom: 15px;
            font-size: 1.8rem;
            color: #fff;
        }
        .password-box p {
            margin-bottom: 25px;
            color: var(--text-light);
            font-size: 1rem;
        }
        .password-box input {
            width: 100%;
            padding: 14px;
            border-radius: 10px;
            border: 1px solid var(--card-border);
            background: var(--input-bg);
            color: #fff;
            font-size: 1.1rem;
            margin-bottom: 25px;
            outline: none;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.3);
        }
        .password-box input:focus {
            border-color: var(--primary-light);
            box-shadow: 0 0 0 3px rgba(106, 17, 203, 0.4);
        }
        .password-box button {
            width: 100%;
            padding: 14px;
            border: none;
            border-radius: 10px;
            background: var(--primary-dark);
            color: #fff;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 6px 15px rgba(37, 117, 252, 0.4);
            transition: all var(--transition-speed);
        }
        .password-box button:hover {
            background: var(--primary-light);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(106, 17, 203, 0.5);
        }
        .hidden { display: none !important; }
        .loader { margin: 40px auto; border: 6px solid rgba(255, 255, 255, 0.1); border-top: 6px solid #fff; border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* --- SweetAlert2 Custom Styles --- */
        .swal2-popup {
            border-radius: 18px !important;
            background: var(--card-bg) !important;
            color: var(--text-light) !important;
            border: 1px solid var(--card-border) !important;
            box-shadow: var(--shadow-dark) !important;
            backdrop-filter: blur(10px) !important;
            -webkit-backdrop-filter: blur(10px) !important;
        }
        .swal2-title {
            color: #fff !important;
            font-size: 1.6rem !important;
        }
        .swal2-html-container {
            color: var(--text-light) !important;
        }
        .swal2-icon {
            margin-top: 15px !important;
        }
        .swal2-actions button {
            font-weight: 600 !important;
            border-radius: 8px !important;
        }
        .swal2-confirm.swal2-styled {
            background-color: var(--primary-dark) !important;
            transition: all var(--transition-speed) !important;
        }
        .swal2-confirm.swal2-styled:hover {
            background-color: var(--primary-light) !important;
            transform: translateY(-2px);
        }
        .swal2-deny.swal2-styled, .swal2-cancel.swal2-styled {
            background-color: var(--button-cancel) !important;
            transition: all var(--transition-speed) !important;
        }
        .swal2-deny.swal2-styled:hover, .swal2-cancel.swal2-styled:hover {
            background-color: #616161 !important;
            transform: translateY(-2px);
        }

        /* --- NEW: SweetAlert2 Success Animation (Pop/Zoom) --- */
        @keyframes swal2-pop-in {
            from {
                transform: scale(0.7) translateY(-20px);
                opacity: 0;
            }
            to {
                transform: scale(1) translateY(0);
                opacity: 1;
            }
        }

        .swal2-show {
            animation: swal2-pop-in 0.3s cubic-bezier(0.68, -0.55, 0.27, 1.55) forwards;
        }

        /* --- Responsive Adjustments for Mobile --- */
        @media (max-width: 768px) {
            body { 
                padding: 15px; /* Reduce overall padding for smaller screens */
                align-items: flex-start; /* Align content to top on mobile */
            }
            .header {
                margin-bottom: 30px;
            }
            .header h1 {
                font-size: 2.2rem;
            }
            .header p {
                font-size: 0.95rem;
            }

            .data-table-container {
                padding: 15px; /* Reduce padding inside the table container */
            }

            .data-table {
                display: block; /* Make table behave like a block element */
                width: 100%;
                min-width: unset; /* Remove minimum width constraint */
            }

            .data-table thead {
                display: none; /* Hide table header on small screens */
            }

            .data-table tbody, .data-table tr {
                display: block; /* Make tbody and tr behave like block elements */
                width: 100%;
            }

            .data-table tr {
                margin-bottom: 15px; /* Add space between "cards" */
                border: 1px solid var(--card-border); /* Add border to each "card" */
                border-radius: 12px; /* Rounded corners for each "card" */
                padding: 15px; /* Padding for each "card" */
                box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
                background-color: rgba(255, 255, 255, 0.05); /* Slightly darker background for cards */
                overflow: hidden; /* Ensure content doesn't overflow rounded corners */
                position: relative;
                white-space: normal; /* Allow text to wrap within cards */
            }
            
            .data-table tbody tr:hover {
                background-color: rgba(255, 255, 255, 0.08); /* Stronger hover effect */
            }

            .data-table td {
                display: flex; /* Make cells flex containers */
                justify-content: space-between; /* Space out label and value */
                align-items: center;
                padding: 8px 0; /* Reduce vertical padding for cells */
                border-bottom: 1px dashed rgba(255, 255, 255, 0.1); /* Dashed separator */
                white-space: normal; /* Allow text to wrap */
            }

            .data-table td:last-child {
                border-bottom: none; /* No border for the last cell */
            }

            .data-table td::before {
                content: attr(data-label); /* Use data-label for pseudo-element */
                font-weight: 600;
                color: #fff;
                opacity: 0.8;
                flex-basis: 40%; /* Give label some fixed width */
                min-width: 100px;
                flex-shrink: 0;
            }

            .data-table .action-buttons {
                justify-content: flex-end; /* Align buttons to the right */
                flex-wrap: wrap; /* Allow buttons to wrap to next line */
                gap: 8px; /* Space between buttons */
                margin-top: 15px; /* Space above action buttons */
                padding-top: 15px; /* Padding to separate from last data row */
                border-top: 1px dashed rgba(255, 255, 255, 0.1);
            }

            .action-buttons button, .action-buttons a {
                padding: 8px 12px;
                font-size: 0.8rem;
                margin-right: 0; /* Remove right margin */
                flex-grow: 1; /* Allow buttons to grow and fill space */
                max-width: calc(50% - 4px); /* Two buttons per row if space allows */
                justify-content: center; /* Center icon and text */
            }
            .action-buttons button:last-child, .action-buttons a:last-child {
                 margin-right: 0;
            }

            .data-table input[type="text"],
            .data-table input[type="password"] {
                flex-basis: 60%; /* Allow input to take remaining space */
            }
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.8rem;
            }
            .header p {
                font-size: 0.85rem;
            }
            .password-box {
                padding: 25px;
            }
            .password-box h2 {
                font-size: 1.3rem;
            }
            .password-box input, .password-box button {
                padding: 10px;
                font-size: 0.9rem;
            }
            .data-table td::before {
                font-size: 0.8rem;
            }
            .action-buttons button, .action-buttons a {
                font-size: 0.75rem;
                padding: 7px 10px;
                gap: 3px;
            }
        }
    </style>
</head>
<body>
    <div class="password-modal" id="passwordModal">
        <div class="password-box">
            <h2><i class="fas fa-user-shield"></i> Super Admin Access</h2>
            <p>Please enter the password to manage data.</p>
            <form id="passwordForm">
                <input type="password" id="superAdminPassword" placeholder="••••••••" required autocomplete="current-password">
                <button type="submit">Unlock</button>
            </form>
        </div>
    </div>

    <div class="container hidden" id="mainContent">
        <div class="header">
            <h1>Data Management</h1>
            <p>Manage admin user accounts.</p>
        </div>
        <div class="data-table-container">
            <div id="loader" class="loader"></div>
            <table class="data-table hidden" id="dataTable">
                <thead>
                    <tr>
                        <th>Username</th>
                        <th>Admin Password</th> <th>Created At</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="userDataBody">
                    </tbody>
            </table>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.5/dist/sweetalert2.all.min.js"></script>
    <script>
        const firebaseConfig = { 
            apiKey: "GANTI_DENGAN_API_KEY_ANDA", 
            authDomain: "mayfa-fa284.firebaseapp.com", 
            databaseURL: "https://mayfa-fa284-default-rtdb.asia-southeast1.firebasedatabase.app" 
        };
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // --- GANTI PASSWORD SUPER ADMIN DI SINI ---
        const SUPER_ADMIN_PASSWORD = "Xlord01";
        const BIRTHDAY_PAGE_BASE_URL = "https://https://epep.xlord.web.id/index.html"; // <-- GANTI DENGAN URL ASLI ANDA

        const passwordModal = document.getElementById('passwordModal');
        const passwordForm = document.getElementById('passwordForm');
        const mainContent = document.getElementById('mainContent');
        const loader = document.getElementById('loader');
        const dataTable = document.getElementById('dataTable');
        const userDataBody = document.getElementById('userDataBody');

        let currentEditingRow = null;

        document.addEventListener('DOMContentLoaded', () => {
            passwordModal.classList.add('show');
        });

        passwordForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const passwordInput = document.getElementById('superAdminPassword').value;
            if (passwordInput === SUPER_ADMIN_PASSWORD) {
                passwordModal.classList.remove('show');
                setTimeout(() => {
                    passwordModal.classList.add('hidden');
                    mainContent.classList.remove('hidden');
                }, 300);

                // Modified SweetAlert for a more modern pop-up
                Swal.fire({
                    icon: 'success',
                    title: '<span style="color: #fff;">Akses Diberikan!</span>', // Inline style for white title
                    text: 'Selamat datang, Super Admin.',
                    showConfirmButton: false,
                    timer: 1500,
                    customClass: {
                        popup: 'swal2-popup',
                        title: 'swal2-title', // Use custom class for general styling
                        htmlContainer: 'swal2-html-container',
                        confirmButton: 'swal2-confirm',
                        icon: 'swal2-icon'
                    },
                    // Add animation effect
                    showClass: {
                        popup: 'animate__animated animate__fadeInUp animate__faster' // Requires animate.css or custom animation
                    },
                    hideClass: {
                        popup: 'animate__animated animate__fadeOutDown animate__faster'
                    }
                });
                loadAllUserData();
            } else {
                Swal.fire({
                    icon: 'error',
                    title: 'Akses Ditolak!',
                    text: 'Password salah. Silakan coba lagi.',
                    confirmButtonText: 'Oke',
                    customClass: {
                        popup: 'swal2-popup',
                        title: 'swal2-title',
                        htmlContainer: 'swal2-html-container',
                        confirmButton: 'swal2-confirm'
                    }
                });
            }
        });

        function loadAllUserData() {
            loader.classList.remove('hidden');
            dataTable.classList.add('hidden');
            userDataBody.innerHTML = '';

            database.ref('admins').once('value').then(adminSnapshot => {
                if (adminSnapshot.exists()) {
                    const adminPromises = [];
                    adminSnapshot.forEach(adminChildSnapshot => {
                        const adminId = adminChildSnapshot.key;
                        const adminData = adminChildSnapshot.val();
                        adminPromises.push(Promise.resolve({ adminId, adminData }));
                    });

                    Promise.all(adminPromises).then(results => {
                        results.forEach(({ adminId, adminData }) => {
                            const row = document.createElement('tr');
                            row.dataset.adminId = adminId;

                            const date = new Date(adminData.createdAt);
                            const formattedDate = date.toLocaleDateString('id-ID', { day: '2-digit', month: 'long', year: 'numeric' });

                            row.innerHTML = `
                                <td data-label="Username"><span class="view-mode username-display">${adminData.username || 'N/A'}</span><input type="text" class="edit-mode hidden username-input" value="${adminData.username || ''}"></td>
                                <td data-label="Admin Password"><span class="view-mode password-display">${adminData.password || 'N/A'}</span><input type="text" class="edit-mode hidden password-input" value="${adminData.password || ''}"></td>
                                <td data-label="Created At">${formattedDate}</td>
                                <td class="action-buttons">
                                    <button class="edit-btn" onclick="toggleEditMode(this, '${adminId}')"><i class="fas fa-edit"></i> Edit</button>
                                    <button class="save-btn hidden" onclick="saveUser(this, '${adminId}')"><i class="fas fa-save"></i> Save</button>
                                    <button class="cancel-btn hidden" onclick="cancelEdit(this, '${adminId}')"><i class="fas fa-times-circle"></i> Cancel</button>
                                    <button class="delete-btn" onclick="deleteUser('${adminId}', '${adminData.username || 'Unknown'}')"><i class="fas fa-trash"></i> Delete</button>
                                </td>
                            `;
                            userDataBody.appendChild(row);
                        });
                        loader.classList.add('hidden');
                        dataTable.classList.remove('hidden');
                    }).catch(error => {
                        console.error("Error fetching all data: ", error);
                        Swal.fire({
                            icon: 'error',
                            title: 'Gagal Memuat Data',
                            text: 'Terjadi kesalahan saat memuat semua data dari Firebase.',
                            confirmButtonText: 'Oke'
                        });
                        loader.classList.add('hidden');
                    });

                } else {
                    userDataBody.innerHTML = '<tr><td colspan="4" style="text-align: center;">Tidak ada data admin yang terdaftar.</td></tr>';
                    loader.classList.add('hidden');
                    dataTable.classList.remove('hidden');
                }
            }).catch(error => {
                console.error("Error fetching admin data: ", error);
                Swal.fire({
                    icon: 'error',
                    title: 'Gagal Memuat Data',
                    text: 'Terjadi kesalahan saat memuat data admin dari Firebase.',
                    confirmButtonText: 'Oke'
                });
                loader.classList.add('hidden');
            });
        }
        
        function toggleEditMode(button, adminId) {
            const row = button.closest('tr');
            
            if (currentEditingRow && currentEditingRow !== row) {
                cancelEdit(currentEditingRow.querySelector('.cancel-btn'), currentEditingRow.dataset.adminId);
            }

            const viewElements = row.querySelectorAll('.view-mode');
            const editElements = row.querySelectorAll('.edit-mode');
            const editBtn = row.querySelector('.edit-btn');
            const saveBtn = row.querySelector('.save-btn');
            const cancelBtn = row.querySelector('.cancel-btn');
            const deleteBtn = row.querySelector('.delete-btn');

            if (row.classList.contains('editing')) {
                viewElements.forEach(el => el.classList.remove('hidden'));
                editElements.forEach(el => el.classList.add('hidden'));
                editBtn.classList.remove('hidden');
                saveBtn.classList.add('hidden');
                cancelBtn.classList.add('hidden');
                deleteBtn.classList.remove('hidden');
                row.classList.remove('editing');
                currentEditingRow = null;
            } else {
                viewElements.forEach(el => el.classList.add('hidden'));
                editElements.forEach(el => el.classList.remove('hidden'));
                editBtn.classList.add('hidden');
                saveBtn.classList.remove('hidden');
                cancelBtn.classList.remove('hidden');
                deleteBtn.classList.add('hidden');
                row.classList.add('editing');
                currentEditingRow = row;
            }
        }

        function saveUser(button, adminId) {
            const row = button.closest('tr');
            const usernameInput = row.querySelector('.username-input').value;
            const passwordInput = row.querySelector('.password-input').value;

            if (!usernameInput || !passwordInput) {
                Swal.fire({
                    icon: 'warning',
                    title: 'Input Tidak Lengkap',
                    text: 'Username dan Admin Password tidak boleh kosong.',
                    confirmButtonText: 'Oke'
                });
                return;
            }

            Swal.fire({
                title: 'Menyimpan Data...',
                allowOutsideClick: false,
                didOpen: () => {
                    Swal.showLoading();
                },
                customClass: {
                    popup: 'swal2-popup',
                    title: 'swal2-title',
                    htmlContainer: 'swal2-html-container'
                }
            });

            const adminUpdates = {
                username: usernameInput,
                password: passwordInput
            };

            database.ref(`/admins/${adminId}`).update(adminUpdates)
                .then(() => {
                    Swal.fire({
                        icon: 'success',
                        title: 'Data Berhasil Disimpan!',
                        showConfirmButton: false,
                        timer: 1500,
                        customClass: {
                            popup: 'swal2-popup',
                            title: 'swal2-title',
                            htmlContainer: 'swal2-html-container'
                        }
                    });
                    loadAllUserData();
                })
                .catch(error => {
                    console.error("Error saving admin data: ", error);
                    Swal.fire({
                        icon: 'error',
                        title: 'Gagal Menyimpan Data',
                        text: `Terjadi kesalahan saat menyimpan data admin: ${error.message}`,
                        confirmButtonText: 'Oke'
                    });
                });
        }

        function cancelEdit(button, adminId) {
            const row = button.closest('tr');
            toggleEditMode(row.querySelector('.edit-btn'), adminId);
            loadAllUserData();
            Swal.fire({
                icon: 'info',
                title: 'Perubahan Dibatalkan',
                showConfirmButton: false,
                timer: 1000,
                customClass: {
                    popup: 'swal2-popup',
                    title: 'swal2-title',
                    htmlContainer: 'swal2-html-container'
                }
            });
        }
        
        function deleteUser(adminId, username) {
            Swal.fire({
                title: 'Konfirmasi Hapus',
                text: `Apakah Anda yakin ingin menghapus pengguna "${username}"? Tindakan ini akan menghapus akun admin dan halaman ulang tahunnya secara permanen.`,
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#e74c3c',
                cancelButtonColor: '#757575',
                confirmButtonText: 'Ya, Hapus!',
                cancelButtonText: 'Batal',
                customClass: {
                    popup: 'swal2-popup',
                    title: 'swal2-title',
                    htmlContainer: 'swal2-html-container',
                    confirmButton: 'swal2-confirm',
                    cancelButton: 'swal2-deny'
                }
            }).then((result) => {
                if (result.isConfirmed) {
                    const updates = {};
                    updates[`/admins/${adminId}`] = null;
                    updates[`/birthday_pages/${adminId}`] = null;

                    database.ref().update(updates)
                        .then(() => {
                            Swal.fire({
                                icon: 'success',
                                title: 'Berhasil Dihapus!',
                                text: `Pengguna "${username}" berhasil dihapus.`,
                                showConfirmButton: false,
                                timer: 1500,
                                customClass: {
                                    popup: 'swal2-popup',
                                    title: 'swal2-title',
                                    htmlContainer: 'swal2-html-container'
                                }
                            });
                            loadAllUserData();
                        })
                        .catch((error) => {
                            console.error("Error deleting user: ", error);
                            Swal.fire({
                                icon: 'error',
                                title: 'Gagal Menghapus',
                                text: 'Terjadi kesalahan saat menghapus pengguna. Cek konsol browser untuk detail.',
                                confirmButtonText: 'Oke',
                                customClass: {
                                    popup: 'swal2-popup',
                                    title: 'swal2-title',
                                    htmlContainer: 'swal2-html-container',
                                    confirmButton: 'swal2-confirm'
                                }
                            });
                        });
                }
            });
        }
    </script>
</body>
</html>
